# Типи даних та перетворення типів

[Перелік усіх лекцій](README.md)

## Типи даних

Значення в JavaScript завжди відноситься до даних певного типу. Наприклад, це може бути рядок або число. Існує вісім основних типів даних в JavaScript. Змінна в JavaScript може містити будь-які дані. В один момент там може бути рядок, а в іншій-число. Такі мови називають "динамічно типізованими". Це означає, що типи даних є, але змінні не прив'язані до жодного з них.

### Число

```js
let n = 123;
n = 12.345;
```

Числовий тип даних (`number`) представляє як цілочисельні значення, так і числа з плаваючою точкою.

Крім звичайних чисел, існують так звані "спеціальні числові значення", які відносяться до цього типу даних: `Infinity`, `-Infinity` і `NaN`.

`Infinity` являє собою математичну [нескінченність](https://ru.wikipedia.org/wiki/Бесконечность#В_математике)∞. Це особливе значення, яке більше будь-якого числа.

Ми можемо отримати його в результаті поділу на нуль:

```js
alert( 1 / 0 ); // Infinity
```

Або задати його явно:

```js
alert( Infinity ); // Infinity
```

- `NaN` означає обчислювальну помилку. Це результат неправильної або невизначеної математичної операції, наприклад:

```js
alert("не число" / 2); // NaN, такий поділ є помилкою
```

Якщо десь в математичному вираженні є `NaN`, то результатом обчислень з його участю буде `NaN`.

Математичні операції в JavaScript "безпечні". Ми можемо робити що завгодно: ділити на нуль, поводитися з нечисловими рядками як з числами і т. д.

### BigInt

У JavaScript тип "number" не може містити числа більше, ніж <code>(2<sup>53</sup>-1)</code> (тобто `9007199254740991`), або менше, ніж <code>-(2<sup>53</sup>-1)</code> для негативних чисел. Це технічне обмеження викликано їх внутрішнім поданням.

Тип `BigInt` був доданий в JavaScript, щоб дати можливість працювати з цілими числами довільної довжини.

Щоб створити значення типу `BigInt`, необхідно додати `n` в кінець числового літерала:

```js
// символ "n" в кінці означає, Що це BigInt
const bigInt = 1234567890123456789012345678901234567890n;
```

### Рядок

Рядок (`string`) в JavaScript повинна бути укладена в лапки.

```js
let str = " Привіт";
let str2 = 'одинарні лапки теж підійдуть';
let phrase = `зворотні лапки дозволяють вбудовувати змінні ${str}`;
```

У JavaScript існує три типи лапок.

1. Подвійні лапки: "Привіт".
2. Одинарні лапки: 'Привіт'.
3. Зворотні лапки: &#96;Привіт&#96;.

Подвійні або одинарні лапки є "простими", між ними немає різниці в JavaScript.

Зворотні ж лапки мають розширену функціональність. Вони дозволяють нам вбудовувати вирази в рядок, укладаючи їх в `${ ... }`. Наприклад:

```js
let name = "Іван";

// Вставимо змінну
alert(`Привіт, ${name}`); // Привіт, Іван!

// Вставимо вираз
alert(`результат:${1 + 2}`); // результат: 3
```

Вираз всередині `${...}` обчислюється, і його результат стає частиною рядка. Ми можемо покласти туди все, що завгодно: змінну `name`, або вираз `1 + 2`, або щось більш складне.

## Булевий (логічний) тип

Булевий тип (`boolean`) може приймати тільки два значення: `true` (істина) і `false` (брехня).

Такий тип, як правило, використовується для зберігання значень так / ні `true` означає" Так, правильно", а `false` означає"Ні, не правильно".

Наприклад:

```js
let nameFieldChecked = true; // так, поле відзначено
let ageFieldChecked = false; // ні, поле не відзначено
```

Булеві значення також можуть бути результатом порівнянь:

```js
let isGreater = 4 > 1;

alert(isGreater); // true 
```

### Значення "null"

Спеціальне значення `null` не відноситься до жодного з типів, описаних вище.

Воно формує окремий тип, який містить тільки значення `null`:

```js
let age = null;
```

У JavaScript`null` не є "посиланням на неіснуючий об'єкт" або "нульовим покажчиком", як у деяких інших мовах. Це просто спеціальне значення, яке являє собою "нічого", "порожньо" або "значення невідоме".

### Значення "undefined"

Спеціальне значення `undefined` також стоїть осібно. Воно формує тип з самого себе так само, як і `null`. Воно означає, що "значення не було присвоєно". Якщо змінна оголошена, але їй не присвоєно ніякого значення, то її значенням буде `undefined`:

```js
let age;

alert (age); // виведе " undefined"
```

### Об'єкти та символи

Тип `object` (об'єкт) - особливий.

Всі інші типи називаються "примітивними", тому що їх значеннями можуть бути тільки прості значення (будь то рядок, або число, або щось ще). В об'єктах же зберігають колекції даних або більш складні структури.

Тип `symbol`(символ) використовується для створення унікальних ідентифікаторів в об'єктах. Ми згадуємо тут про нього для повноти картини, вивчимо цей тип після об'єктів.

### Оператор typeof [#type-typeof]

Оператор `typeof` повертає тип аргументу. Це корисно, коли ми хочемо обробляти значення різних типів по-різному або просто хочемо зробити перевірку.

У нього є дві синтаксичні форми:

1. Синтаксис оператора: `typeof x`.
2. Синтаксис функції: `typeof (x)`.

Іншими словами, він працює з дужками або без дужок. Результат однаковий.

Виклик `typeof x` повертає рядок з ім'ям типу:

```js
typeof undefined // "undefined"

typeof 0 // "number"

typeof 10n // "bigint"

typeof true // "boolean"

typeof "foo" // "string"

typeof Symbol("id") // "symbol"

typeof Math // "object"  (1)

typeof null // "object"  (2)

typeof alert // "function"  (3)
```

Останні три рядки потребують пояснення:

1. `Math` - це вбудований об'єкт, який надає математичні операції та константи.
2. Результатом виклику`typeof null` є `"object"`. Це офіційно визнана помилка в `typeof`, що веде початок з часів створення JavaScript і збережена для сумісності. Звичайно, `null` не є об'єктом. Це спеціальне значення з окремим типом.
3. Виклик `typeof alert`повертає `"function"`, тому що `alert` є функцією. Ми вивчимо функції в наступних розділах, де заодно побачимо, що в JavaScript немає спеціального типу "функція". Функції відносяться до об'єктного типу. Але `typeof` обробляє їх особливим чином, повертаючи `"function"`. Так теж повелося від створення JavaScript. Формально це невірно, але може бути зручним на практиці.

## Перетворення типів

Найчастіше оператори і функції автоматично приводять передані їм значення до потрібного типу.

### Рядкове перетворення

Рядкове перетворення відбувається, коли потрібно представлення чого-небудь у вигляді рядка. Наприклад `alert (value)` перетворює значення до рядка. Також ми можемо використовувати функцію `String(value)`, щоб перетворити значення до рядка:

```js
let value = true;
alert(typeof value); // boolean

value = String(value); // тепер value це рядок " true"
alert(typeof value); // string
```

Перетворення відбувається очевидним чином. `false` стає `"false"`, `null` стає `"null"` і т. п.

### Чисельне перетворення

Чисельне перетворення відбувається в математичних функціях і виразах. Наприклад, коли операція ділення `/` застосовується не до числа:

```js
alert( "6" / "2" ); // 3, рядки перетворюються в числа
```

Ми можемо використовувати функцію `Number(value)`, щоб явно перетворити `value` до числа:

```js
let str = "123";
alert(typeof str); // string

let num = Number (str); // стає числом 123

alert(typeof num); // number
```

Явне перетворення часто застосовується, коли ми очікуємо отримати число з строкового контексту, наприклад з текстових полів форм.
Якщо рядок не може бути явно приведена до числа, то результатом перетворення буде `NaN`. Наприклад:

```js
let age = Number ("будь-який рядок замість числа");

alert (age); // NaN, перетворення не вдалося
```

Правила чисельного перетворення:

| Значення                                                                                                                                                                                  | перетворюється в... |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- |
| `undefined`                                                                                                                                                                               | `NaN`               |
| `null`                                                                                                                                                                                    | `0`                 |
| <code>true&nbsp;/&nbsp;false</code>                                                                                                                                                       | `1` / `0`           |
| `string` / пробільні Символи по краях обрізаються. Далі, якщо залишається порожній рядок, то отримуємо `0`, інакше з непорожнього рядка "зчитується" число. При помилці результат `nan`. |

Приклад:

```js
alert(Number("   123   ")); // 123
alert(Number("123z")); // NaN (помилка читання числа на місці символу " z")
alert(Number(true));        // 1
alert(Number(false));       // 0
```

Врахуйте, що `null` і `undefined` поводяться по-різному. Так, `null` стає нулем, тоді як `undefined` приводиться до `NaN`.

Більшість математичних операторів також виробляє дане перетворення, як ми побачимо в наступному розділі.

### Логічне перетворення

Логічне перетворення найпростіше.

Відбувається в логічних операціях(пізніше ми познайомимося з умовними перевірками і подібними конструкціями), але також може бути виконано явно за допомогою функції `Boolean (value)`.

Правило перетворення:

- Значення, які інтуїтивно "порожні", на зразок `0`, порожнього рядка, `null`, `undefined` і `NaN`, стають `false`.
- Всі інші значення стають `true`.

Наприклад:

```js
alert(Boolean(1)); // true
alert(Boolean(0)); // false

alert(Boolean("Привіт!")); // true
alert(Boolean("")); // false
```
